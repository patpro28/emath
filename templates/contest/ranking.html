{% extends 'base.html' %}

{% block content_title %}
{% include 'title.html' %}
{% endblock content_title %}

{% block content_media %}
<link rel="stylesheet" href="{{ static('submission/rank.css') }}">
<style>
  .organization_column, .username_column {
    display: none;
    font-weight: 1000;
  }

  .organization_column {
    width: 10rem;
  }

  .username_column {
    width: 15rem;
  }

  #ranking {
    width: 100%;
    font-size: 1em;
    border-radius: 0.28571429rem;
  }
  #ranking thead th {
    padding: 10px;
    color:#747474;
    font-size:14px;
    font-weight:bold;
  }

  .fullname {
    min-width: 10rem;
    font-weight: 1000;
  }

  .problem_cell {
    min-width: 60px;
    width: 70px;
    text-align: center;
    font-size: 24px;
    height: 50px;
  }

  #ranking tbody tr {
    color:#747474;
  }

  #ranking, th, td {
    border-collapse: separate;
    border: 1px solid grey;
  }

  #ranking thead tr:first-child>th:first-child {
    border-radius: 0.28571429rem 0 0 0;
  }

  td.username, td.fullname {
    padding-left: 1rem;
  }

  .points, .rank {
    text-align: center;
  }

  th.rank {
    width: 1rem;
  }

  th.points {
    width: 2.5rem;
  }

  td.rank {
    font-weight: 1000;
  }

  #ranking tbody {
    display: table-row-group;
    vertical-align: middle;
  }
  #ranking tbody tr td.points div.sub.header {
    font-size: 10px;
  }
</style>
{% endblock content_media %}

{% block content_js %}
{% include 'contest/media-js.html' %}
<script>
  $(function () {
    $('#show-username').click(function () {
      $('.username_column').toggle();
      localStorage.setItem('show-usernames', $('.username_column').is(':visible') ? 'true' : 'false');
    });
  
    if (localStorage.getItem('show-usernames') == 'true') {
      $('.username_column').show();
      $('#show-username').prop('checked', true);
    }

    $('#show-organization').click(function () {
      $('.organization_column').toggle();
      localStorage.setItem('show-organizations', $('.organization_column').is(':visible') ? 'true' : 'false');
    });
  
    if (localStorage.getItem('show-organizations') == 'true') {
      $('.organization_column').show();
      $('#show-organization').prop('checked', true);
    }
  });
</script>
{% endblock content_js %}

{% block content %}
{% include 'contest/contest-list-tab.html' %}
<div class="ui bottom attached segment">
  <div class="ui equal width five column grid" style="margin-bottom: 1px;">
    <div class="column">
      <input type="checkbox" id="show-username">
      <label for="show-username">{{ _('Show username') }}</label>
    </div>
    <div class="column">
      <input type="checkbox" id="show-organization">
      <label for="show-organization">{{ _('Show organization') }}</label>
    </div>
    <div class="column"></div>
    <div class="column"></div>
    <div class="column"></div>
  </div>
  <div style="overflow-x: auto; white-space:nowrap;">
    {% include 'contest/ranking-table.html' %}
  </div>
</div>
{% endblock content %}